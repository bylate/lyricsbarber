<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Barber - Upload Files</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="icon" type="image/png" href="static/images/fav.png"> 
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #000000;
            color: #ffffff;
            overflow-x: hidden;
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        
        .hero {
            height: 100vh;
            width: 100vw;
            position: relative;
            background-image: url("static/images/picofmr.png");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
        }

        .fancy-text, .contact-box {
            position: absolute;
            z-index: 2;
        }

        .fancy-text {
            font-family: 'Great Vibes', cursive;
            font-size: 36px;
            color: #ffffff;
            top: 20px;
            left: 20px;
            margin: 0;
            line-height: 1.2;
            letter-spacing: 0.05em;
        }

        .contact-box {
            top: 20px;
            right: 20px;
        }

        .contact-box .btn {
            display: flex;
            align-items: center;
            background-color: #1a1a1a;
            color: #ffffff;
            border: 1px solid #ffffff;
            padding: 8px 12px;
            font-size: 14px;
            font-weight: 500;
            border-radius: 5px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
            transition: background-color 0.6s ease, color 0.6s ease;
        }
        
        .contact-box .btn:hover {
            background-color: #000000;
            color: #ffffff;
            border-color: #ffffff;
        }
        
        .contact-box .btn svg {
            margin-right: 8px;
            fill: #ffffff;
        }

        .hero h1 {
            position: absolute;
            font-size: 3.5rem;
            color: #ffffff;
            text-align: center;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            font-weight: bold;
            line-height: 1.2;
        }

        .hero p {
            position: absolute;
            font-size: 1.5rem;
            color: #ffffff;
            text-align: center;
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }

        .content-container {
            padding: 4rem 2rem;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1.5s ease-in-out, transform 1.5s ease-in-out;
        }

        .content-container.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .intro-text {
            font-size: 2rem;
            line-height: 1.5;
            max-width: 800px;
            margin: 0 auto;
            color: #ffffff;
        }

        .bold-text {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 2rem;
            max-width: 800px;
            text-align: center;
        }

        .upload-container {
            margin-top: 100px;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .custom-file {
            width: 80%;
            margin-bottom: 1.5rem;
        }

        .custom-file-label::after {
            content: "Browse";
            color: #000000;
        }
        
        .custom-file-label {
            color: #000000;
            background-color: #ffffff;
            border: 1px solid #ffffff;
            border-radius: 5px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background-color 0.5s ease, color 0.5s ease;
            font-size: 1.25rem;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
        }

        .custom-file-label:hover {
            background-color: #f1f1f1;
            border-color: #f1f1f1;
        }
        
        .custom-file-input {
            background-color: #ffffff;
            color: #000000;
            border: none;
        }

        .btn-primary {
            background-color: #ffffff;
            color: #000000;
            border-color: #ffffff;
            padding: 0.75rem 2rem;
            font-size: 1.25rem;
            border-radius: 5px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        .btn-primary:hover {
            background-color: #f1f1f1;
            border-color: #f1f1f1;
        }

        .image-container {
            text-align: center;
            margin-top: 30px;
        }

        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
        }

        .caption {
            margin-top: 10px;
            font-size: 1.2em;
            color: #ffffff;
        }

        .upload-note {
            text-align: center;
            font-size: 0.9rem;
            margin-top: 1rem;
            color: #ffffff;
        }
    </style>
</head>
<body>
    <div class="fancy-text">Lyrics Barber</div>

    <div class="contact-box">
        <a href="mailto:szhang030207@gmail.com" class="btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
                <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zM2 3a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383L8.236 9.433a.5.5 0 0 1-.472 0L1 5.383V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V5.383z"/>
            </svg>
            Contact
        </a>
    </div>

    <div class="hero">
        <h1>Welcome to The Cut</h1>
    </div>

    <div class="content-container visible">
        <div class="bold-text">
            Struggling to find a clean version of your song? Want to sit back and relax from manual cleaning? We've got you.
        </div>
    </div>

    <div class="content-container" id="introContainer">
        <div class="intro-text">
            This program uses advanced AI technologies to process your audio files. 
            It utilizes the Whisper model from OpenAI for transcription, WebVTT for timestamp handling, 
            and the Profanity Check library to detect and mute offensive language. The processed 
            audio replaces detected profanities with music-only segments, and you can also manually 
            specify additional sections to be edited.
        </div>
    </div>

    <div class="content-container" id="demoContainer">
        <div class="text-center mt-4">
            <audio controls>
                <source src="static/audio/mashup1_final.mp3" type="audio/mp3">
                Your browser does not support the audio element.
            </audio>
            <p class="upload-note">Listen to a demo of what the final processed output might sound like.</p>
        </div>
    </div>

    <div class="container content-container upload-container" id="uploadContainer">
        <h3>Upload Files (Max 2GB each)</h3>
        <form method="post" action="/upload" enctype="multipart/form-data">
            <div class="custom-file">
                <input type="file" class="custom-file-input" id="originalFile" name="original" required>
                <label class="custom-file-label" for="originalFile">Choose Original Song</label>
            </div>
            <div class="custom-file">
                <input type="file" class="custom-file-input" id="vocalFile" name="vocal" required>
                <label class="custom-file-label" for="vocalFile">Choose Vocal Only</label>
            </div>
            <div class="custom-file">
                <input type="file" class="custom-file-input" id="musicFile" name="music" required>
                <label class="custom-file-label" for="musicFile">Choose Music Only</label>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-primary mt-3">Upload</button>
            </div>
            <p class="upload-note"><em>Note: After clicking submit, please be patient as the AI processes the audio. This may take around 3-5 minutes depending on computer.</em></p>
        </form>
        <p class="upload-note">
            If you need to separate your audio into vocal and music tracks, you can use the 
            <a href="https://vocalremover.org/" target="_blank">Vocal Remover tool</a> before uploading your files.
        </p>
    </div>

    <div class="image-container">
        <a href="https://www.youtube.com/watch?v=wvzsbEUGRv4" target="_blank">
            <img src="static/images/cleancut.png" alt="Clean Fade">
        </a>
        <div class="caption">Make your song as clean as this fade</div>
    </div>
    <script>
        document.querySelectorAll('.custom-file-input').forEach(input => {
            input.addEventListener('change', function (e) {
                var fileName = e.target.files[0].name;
                var nextSibling = e.target.nextElementSibling;
                nextSibling.innerText = fileName;
            });
        });

        window.addEventListener('scroll', function () {
            const introContainer = document.getElementById('introContainer');
            const demoContainer = document.getElementById('demoContainer');
            const uploadContainer = document.getElementById('uploadContainer');
            const introPosition = introContainer.getBoundingClientRect().top;
            const demoPosition = demoContainer.getBoundingClientRect().top;
            const uploadPosition = uploadContainer.getBoundingClientRect().top;
            const screenPosition = window.innerHeight / 1.3;

            if (introPosition < screenPosition) {
                introContainer.classList.add('visible');
            }

            if (demoPosition < screenPosition) {
                demoContainer.classList.add('visible');
            }

            if (uploadPosition < screenPosition) {
                uploadContainer.classList.add('visible');
            }
        });
    </script>
</body>
</html>
